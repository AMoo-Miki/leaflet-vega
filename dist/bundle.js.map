{"version":3,"file":"bundle.js","sources":["../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/vega-spec-injector/es/index.js","../src/VegaLayer.js"],"sourcesContent":["export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n  function _class(onWarning) {\n    _classCallCheck(this, _class);\n\n    this.onWarning = onWarning || (console ? console.log : function () {});\n  }\n\n  /**\n   * Add values like signals to a vega spec, or ignore if the they are already defined.\n   * @param {object} spec vega spec to modify and return\n   * @param {string} field name of the vega spec branch, e.g. `signals`\n   * @param {<object|string>[]} values to add\n   * @return {object} returns the same spec object as passed in\n   */\n\n\n  _class.prototype.addToList = function addToList(spec, field, values) {\n    var newSigs = new Map(values.map(function (v) {\n      return typeof v === \"string\" ? [v, { name: v }] : [v.name, v];\n    }));\n\n    for (var _iterator = this.findUndefined(spec, field, newSigs.keys()), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var sig = _ref;\n\n      spec[field].push(newSigs.get(sig));\n    }\n\n    return spec;\n  };\n\n  /**\n   * Set a spec field, and warn if overriding an existing value in that field\n   * @param {object} spec vega spec to modify and return\n   * @param {string} field\n   * @param {*} value\n   * @return {object} returns the same spec object as passed in\n   */\n\n\n  _class.prototype.overrideField = function overrideField(spec, field, value) {\n    if (spec[field] && spec[field] !== value) {\n      this.onWarning(\"Overriding \" + field + \": \" + spec[field] + \" \\uD800\\uDCD8 \" + value);\n    }\n    spec[field] = value;\n    return spec;\n  };\n\n  /**\n   * Find all names that are not defined in the spec's section. Creates section if missing.\n   * @param {object} spec\n   * @param {string} section\n   * @param {Iterable.<string>} names\n   * @return {Iterable.<string>}\n   */\n\n\n  _class.prototype.findUndefined = function findUndefined(spec, section, names) {\n    if (!spec.hasOwnProperty(section)) {\n      spec[section] = [];\n      return names;\n    } else if (!Array.isArray(spec[section])) {\n      throw new Error(\"spec.\" + section + \" must be an array\");\n    }\n\n    var nameStrings = new Set(names);\n    for (var _iterator2 = spec[section], _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var obj = _ref2;\n\n      // If obj has a name field, delete that name from the names\n      // Set will silently ignore delete() for undefined names\n      if (obj.name) nameStrings.delete(obj.name);\n    }\n\n    return nameStrings;\n  };\n\n  return _class;\n}();\n\nexport default _class;","import Vsi from 'vega-spec-injector';\n// eslint-disable-next-line import/extensions,import/no-unresolved\nimport L from 'leaflet';\nimport { version } from '../package.json';\n\nL.vega = function vega(spec, options) {\n  return new L.VegaLayer(spec, options);\n};\n\nL.VegaLayer = (L.Layer ? L.Layer : L.Class).extend({\n\n  options: {\n    // FIXME: uses window.vega\n    // eslint-disable-next-line no-undef\n    vega: window && window.vega,\n\n    // If Vega spec creates controls (inputs), put them all into this container\n    bindingsContainer: undefined,\n\n    // Config to be passed to the Vega`s parse method\n    parseConfig: undefined,\n\n    // Options to be passed to the Vega`s parse method\n    parseOptions: undefined,\n\n    // Config to be passed ot the Vega`s View constructor\n    viewConfig: undefined,\n\n    // If true, graph will be repainted only after the map has finished moving (faster)\n    delayRepaint: true,\n\n    // optional warning handler:   (warning) => { ... }\n    onWarning: false,\n\n    // optional error handler:   (err) => { ...; throw err; }\n    onError: false,\n  },\n\n  initialize(spec, options) {\n    L.Util.setOptions(this, options);\n\n    // expression parsing in Vega is global,\n    // ensure it hasn't been intialized before,\n    // and make sure calls to setMapView() only happen\n    // when the View instance was created by us\n    const { vega } = this.options;\n    if (!vega.expressionFunction('setMapView')) {\n      vega.expressionFunction(\n        'setMapView',\n        function setMapView(...args) {\n          const view = this.context.dataflow;\n          const handler = view.Leaflet_setMapViewHandler;\n          if (!handler) throw new Error('setMapView() is not defined for this graph');\n          view.runAfter(() => handler(...args));\n        },\n      );\n    }\n    this._ignoreSignals = 0;\n    this.disableSignals = () => {\n      this._ignoreSignals++;\n    };\n    this.enableSignals = () => {\n      this._ignoreSignals--;\n      if (this._ignoreSignals < 0) {\n        this._ignoreSignals = 0;\n        throw new Error('Too many calls to enableSignals()');\n      }\n    };\n\n    // Inject signals into the spec\n    const vsi = new Vsi(options.onWarning);\n\n    vsi.overrideField(spec, 'padding', 0);\n    vsi.overrideField(spec, 'autosize', 'none');\n    vsi.addToList(spec, 'signals', ['zoom', 'latitude', 'longitude']);\n    vsi.addToList(spec, 'projections', [this.defaultProjection]);\n\n    this._spec = spec;\n  },\n\n  /**\n   * @param {L.Map} map\n   * @return {L.VegaLayer}\n   */\n  addTo(map) {\n    map.addLayer(this);\n    return this;\n  },\n\n  onAdd(map) {\n    this._onAddAsync(map);\n    return this;\n  },\n\n  async _onAddAsync(map) {\n    this.disableSignals();\n\n    try {\n      this._map = map;\n      this._vegaContainer = L.DomUtil.create('div', 'leaflet-vega-container');\n      map._panes.overlayPane.appendChild(this._vegaContainer);\n\n      const { vega, viewConfig } = this.options;\n\n      const dataflow = vega.parse(this._spec, this.options.parseConfig, this.options.parseOptions);\n\n      if (viewConfig && viewConfig.loader) {\n        const oldLoad = viewConfig.loader.load.bind(viewConfig.loader);\n        viewConfig.loader.load = (uri, opt) => oldLoad(uri, opt);\n      }\n      this._view = new vega.View(dataflow, viewConfig);\n\n      if (!viewConfig || viewConfig.logLevel === undefined) {\n        this._view.logLevel(vega.Warn);\n      }\n      if (this.options.onWarning) {\n        this._view.warn = this.options.onWarning;\n      }\n      if (this.options.onError) {\n        this._view.error = this.options.onError;\n      }\n\n      this._view\n        .padding({\n          left: 0, right: 0, top: 0, bottom: 0,\n        })\n        .initialize(this._vegaContainer, this.options.bindingsContainer)\n        .hover();\n\n      const onSignal = (sig, value) => this._onSignalChange(sig, value);\n\n      this._view\n        .addSignalListener('latitude', onSignal)\n        .addSignalListener('longitude', onSignal)\n        .addSignalListener('zoom', onSignal);\n\n      map.on(this.options.delayRepaint ? 'moveend' : 'move', () => this._resetAsync());\n      map.on('zoomend', () => this._resetAsync());\n\n      /**\n       * Given longitude/latitude/zoom or bounding box, position the map to those coordinates\n       * The function can be called in one of the following ways:\n       *  setMapView(latitude, longitude)\n       *  setMapView(latitude, longitude, zoom)\n       *  setMapView([longitude, latitude])\n       *  setMapView([longitude, latitude], zoom)\n       *  setMapView([[lng1,lat1],[lng2,lat2]])\n       */\n      this._view.Leaflet_setMapViewHandler = (...args) => {\n        function throwError() {\n          throw new Error('Unexpected setMapView() parameters. It could be called with a bounding box setMapView([[longitude1,latitude1],[longitude2,latitude2]]), or it could be the center point setMapView([longitude, latitude], optional_zoom), or it can be used as setMapView(latitude, longitude, optional_zoom)');\n        }\n\n        function checkArray(val) {\n          if (!Array.isArray(val) || val.length !== 2\n            || typeof val[0] !== 'number' || typeof val[1] !== 'number'\n          ) {\n            throwError();\n          }\n          return val;\n        }\n\n        let lng;\n        let lat;\n        let zoom;\n        switch (args.length) {\n          case 1: {\n            const arg = args[0];\n            if (Array.isArray(arg) && arg.length === 2\n              && Array.isArray(arg[0]) && Array.isArray(arg[1])\n            ) {\n              // called with a bounding box, need to reverse order\n              const [lng1, lat1] = checkArray(arg[0]);\n              const [lng2, lat2] = checkArray(arg[1]);\n              map.fitBounds(L.latLngBounds(L.latLng(lat1, lng1), L.latLng(lat2, lng2)));\n            } else {\n              // called with a center point and no zoom\n              [lng, lat] = checkArray(arg);\n            }\n            break;\n          }\n          case 2:\n            if (Array.isArray(args[0])) {\n              [lng, lat] = checkArray(args[0]);\n              // eslint-disable-next-line prefer-destructuring\n              zoom = args[1];\n            } else {\n              [lat, lng] = args;\n            }\n            break;\n          case 3:\n            [lat, lng, zoom] = args;\n            break;\n          default:\n            throwError();\n        }\n\n        if (lat !== undefined && lng !== undefined) {\n          if (typeof lat !== 'number' || typeof lng !== 'number') {\n            throwError();\n          }\n          if (zoom === undefined) {\n            zoom = map.getZoom();\n          } else if (typeof zoom !== 'number') {\n            throwError();\n          }\n          map.setView({ lat, lng }, zoom);\n        }\n      };\n      await this._resetAsync(true);\n    } catch (err) {\n      this._reportError(err);\n    } finally {\n      this.enableSignals();\n    }\n  },\n\n  onRemove() {\n    if (this._view) {\n      this._view.finalize();\n      this._view = null;\n    }\n\n    // TODO: once Leaflet 0.7 is fully out of the picture, replace this with L.DomUtil.empty()\n    const el = this._vegaContainer;\n    while (el.firstChild) {\n      el.removeChild(el.firstChild);\n    }\n  },\n\n  _reportError(err) {\n    /* eslint-disable no-console */\n    if (this.options.onError) {\n      this.options.onError(err);\n    } else if (console && console.error) {\n      console.error(err);\n    }\n    /* eslint-enable */\n  },\n\n  _onSignalChange(sig, value) {\n    if (this._ignoreSignals) {\n      return;\n    }\n\n    try {\n      const map = this._map;\n      const center = map.getCenter();\n      let zoom = map.getZoom();\n\n      switch (sig) {\n        case 'latitude':\n          center.lat = value;\n          break;\n        case 'longitude':\n          center.lng = value;\n          break;\n        case 'zoom':\n          zoom = value;\n          break;\n        default:\n          return; // ignore\n      }\n\n      map.setView(center, zoom);\n    } catch (err) {\n      this._reportError(err);\n    }\n  },\n\n  async _resetAsync(force) {\n    if (!this._view) return;\n\n    this.disableSignals();\n    try {\n      const map = this._map;\n      const view = this._view;\n      const topLeft = map.containerPointToLayerPoint([0, 0]);\n      L.DomUtil.setPosition(this._vegaContainer, topLeft);\n\n      const size = map.getSize();\n      const center = map.getCenter();\n      const zoom = map.getZoom();\n\n      // Only send changed signals to Vega.\n      // Detect if any of the signals have changed before calling run()\n      const sendSignal = (sig, value) => {\n        if (view.signal(sig) !== value) {\n          view.signal(sig, value);\n          return 1;\n        }\n        return 0;\n      };\n\n      // update if any of the signal's values have changed\n      const changed = sendSignal('width', size.x)\n        + sendSignal('height', size.y)\n        + sendSignal('latitude', center.lat)\n        + sendSignal('longitude', center.lng)\n        + sendSignal('zoom', zoom);\n\n      if (changed > 0 || force) {\n        await view.runAsync();\n      }\n    } catch (err) {\n      this._reportError(err);\n    } finally {\n      this.enableSignals();\n    }\n  },\n\n  defaultProjection: {\n    name: 'projection',\n    type: 'mercator',\n    scale: { signal: '256*pow(2,zoom)/2/PI' },\n    rotate: [{ signal: '-longitude' }, 0, 0],\n    center: [0, { signal: 'latitude' }],\n    translate: [{ signal: 'width/2' }, { signal: 'height/2' }],\n    fit: false,\n  },\n\n});\n\nL.VegaLayer.version = version;\n"],"names":["arrayLikeToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","L","vega","spec","options","VegaLayer","Layer","Class","extend","window","bindingsContainer","undefined","parseConfig","parseOptions","viewConfig","delayRepaint","onWarning","onError","initialize","Util","setOptions","expressionFunction","setMapView","args","view","context","dataflow","handler","Leaflet_setMapViewHandler","Error","runAfter","_ignoreSignals","disableSignals","enableSignals","vsi","Vsi","overrideField","addToList","defaultProjection","_spec","addTo","map","addLayer","onAdd","_onAddAsync","_map","_vegaContainer","DomUtil","create","_panes","overlayPane","appendChild","parse","loader","oldLoad","load","bind","uri","opt","_view","View","logLevel","Warn","warn","error","padding","left","right","top","bottom","hover","onSignal","sig","value","_onSignalChange","addSignalListener","on","_resetAsync","throwError","checkArray","val","Array","isArray","length","lng","lat","zoom","arg","lng1","lat1","lng2","lat2","fitBounds","latLngBounds","latLng","getZoom","setView","_reportError","onRemove","finalize","el","firstChild","removeChild","err","console","center","getCenter","force","topLeft","containerPointToLayerPoint","setPosition","size","getSize","sendSignal","signal","changed","x","y","runAsync","name","type","scale","rotate","translate","fit","version"],"mappings":"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"}